#!/usr/bin/env python3
# An evaluate generic fake script
import os, sys, json, math, hashlib
import random

VERSION = 1


params_values = {}


def get_param_value(name, default=None):
    return next((v for k, v in params_values.items() if k.endswith("." + name)), default)

def set_random_seed():
    random.seed(get_param_value("seed", 1234))

assert len(sys.argv) == 3, "Expected argv: evaluate.py model test.data"


def phi(x):
    'Cumulative distribution function for the standard normal distribution'
    return (1.0 + math.erf(x / math.sqrt(2.0))) / 2.0

def hash_str(s):
    return hashlib.md5(s.encode()).digest()[0]

FINALIZE = {"0-1": phi, "1-0": lambda x: 1 - phi(x), "id": lambda x: x, "0-": math.exp,
            "intexp": lambda x: int(1000 * 10 ** x), "int": lambda x: int(100 * x)}


def evaluate_metric(name, typ, data):
    val = 0

    for p, v in data["params"].items():
        v = math.copysign(math.log(abs(v) + 1, 100), v)
        factor, noise, noise_period = COEFS["params"][hash_str(f"{name}:{p}")]
        val += factor * v + noise * math.cos(v / noise_period * math.pi * 2)

    for i, w in enumerate(data["work"]):
        w *= 0.33
        factor, noise, noise_period = COEFS["work"][hash_str(f"{name}:{i}")]
        val += factor * w + noise * math.sin(w / noise_period * math.pi * 2)

    return FINALIZE[typ](val)


def update_json(filename, update):
    try:
        with open(filename) as fd:
            value = json.load(fd)
    except (FileNotFoundError, json.JSONDecodeError):
        value = {}

    value.update(update)
    with open(filename, "w") as fd:
        json.dump(value, fd)


def dict_set(coll, keys, value):
    for i, key in enumerate(keys):
        if i == len(keys) - 1:
            coll[key] = value
        elif key not in coll:
            coll[key] = {}
        coll = coll[key]


def main():
    with open(sys.argv[1]) as model:
        data = json.load(model)
        data_size = os.stat(sys.argv[2]).st_size
        data["work"].append(math.log(data_size + 1))

        for filename, metrics in METRICS.items():
            update = {}
            for name, typ in metrics.items():
                dict_set(update, name.split("."), evaluate_metric(name, typ, data))
            update_json(filename, update)


# This coefficients define how params and "work" (data amount + code version) change metric values.
# To be both stable and not preconfigured for particular param/metric names we use feature hashing.
# These take some space so we place it as low as possible in out code.
METRICS = {'metrics.json': {'branch.AO': '0-1',
                  'branch.F7': 'id',
                  'branch.FB': '0-',
                  'branch.H8': '0-1',
                  'branch.P0': 'intexp',
                  'branch.XX': '0-',
                  'branch.accuracy': '0-1',
                  'branch.auc': '0-1',
                  'branch.avg_time': '0-',
                  'branch.benchmark': 'id',
                  'branch.distinct': 'int',
                  'branch.entropy': 'id',
                  'branch.errors': 'int',
                  'branch.exp_cost': 'intexp',
                  'branch.f1-score': '0-1',
                  'branch.falsepos': '1-0',
                  'branch.fullscore': '0-1',
                  'branch.go': '1-0',
                  'branch.ha': 'intexp',
                  'branch.index': '0-',
                  'branch.loss': '1-0',
                  'branch.meanscore': '0-1',
                  'branch.n_docs': 'intexp',
                  'branch.non_null': '1-0',
                  'branch.nz': 'id',
                  'branch.precision': '0-1',
                  'branch.prediction_time': '0-',
                  'branch.recall': '0-1',
                  'branch.size': 'intexp',
                  'branch.time': '0-',
                  'branch.vg': '1-0',
                  'branch.weighted_avg': 'id',
                  'classifier.AO': 'intexp',
                  'classifier.F7': '0-1',
                  'classifier.FB': '1-0',
                  'classifier.H8': 'intexp',
                  'classifier.P0': '0-',
                  'classifier.XX': '0-1',
                  'classifier.accuracy': '0-1',
                  'classifier.auc': '0-1',
                  'classifier.avg_time': '0-',
                  'classifier.benchmark': 'id',
                  'classifier.distinct': 'int',
                  'classifier.entropy': 'id',
                  'classifier.errors': 'int',
                  'classifier.exp_cost': 'intexp',
                  'classifier.f1-score': '0-1',
                  'classifier.falsepos': '1-0',
                  'classifier.fullscore': '0-1',
                  'classifier.go': 'id',
                  'classifier.ha': 'int',
                  'classifier.index': '0-',
                  'classifier.loss': '1-0',
                  'classifier.meanscore': '0-1',
                  'classifier.n_docs': 'intexp',
                  'classifier.non_null': '1-0',
                  'classifier.nz': 'id',
                  'classifier.precision': '0-1',
                  'classifier.prediction_time': '0-',
                  'classifier.recall': '0-1',
                  'classifier.size': 'intexp',
                  'classifier.time': '0-',
                  'classifier.vg': 'id',
                  'classifier.weighted_avg': 'id',
                  'entities.AO': '1-0',
                  'entities.F7': '0-1',
                  'entities.FB': '0-1',
                  'entities.H8': '1-0',
                  'entities.P0': '0-1',
                  'entities.XX': '0-',
                  'entities.accuracy': '0-1',
                  'entities.auc': '0-1',
                  'entities.benchmark': 'id',
                  'entities.distinct': 'int',
                  'entities.entropy': 'id',
                  'entities.errors': 'int',
                  'entities.exp_cost': 'intexp',
                  'entities.f1-score': '0-1',
                  'entities.falsepos': '1-0',
                  'entities.fullscore': '0-1',
                  'entities.go': 'intexp',
                  'entities.ha': 'intexp',
                  'entities.index': '0-',
                  'entities.loss': '1-0',
                  'entities.meanscore': '0-1',
                  'entities.n_docs': 'intexp',
                  'entities.non_null': '1-0',
                  'entities.nz': '0-1',
                  'entities.precision': '0-1',
                  'entities.prediction_time': '0-',
                  'entities.recall': '0-1',
                  'entities.size': 'intexp',
                  'entities.time': '0-',
                  'entities.vg': '0-1',
                  'entities.weighted_avg': 'id',
                  'mark.AO': '0-',
                  'mark.F7': '0-1',
                  'mark.FB': 'intexp',
                  'mark.H8': 'intexp',
                  'mark.P0': '0-',
                  'mark.XX': 'intexp',
                  'mark.accuracy': '0-1',
                  'mark.auc': '0-1',
                  'mark.avg_time': '0-',
                  'mark.benchmark': 'id',
                  'mark.distinct': 'int',
                  'mark.entropy': 'id',
                  'mark.errors': 'int',
                  'mark.exp_cost': 'intexp',
                  'mark.f1-score': '0-1',
                  'mark.falsepos': '1-0',
                  'mark.fullscore': '0-1',
                  'mark.ha': 'id',
                  'mark.index': '0-',
                  'mark.loss': '1-0',
                  'mark.meanscore': '0-1',
                  'mark.n_docs': 'intexp',
                  'mark.non_null': '1-0',
                  'mark.nz': 'id',
                  'mark.precision': '0-1',
                  'mark.prediction_time': '0-',
                  'mark.size': 'intexp',
                  'mark.time': '0-',
                  'mark.vg': 'id',
                  'mark.weighted_avg': 'id',
                  'train.AO': 'intexp',
                  'train.F7': 'int',
                  'train.FB': '0-1',
                  'train.H8': '0-',
                  'train.P0': '0-',
                  'train.XX': '0-1',
                  'train.accuracy': '0-1',
                  'train.auc': '0-1',
                  'train.benchmark': 'id',
                  'train.distinct': 'int',
                  'train.entropy': 'id',
                  'train.errors': 'int',
                  'train.exp_cost': 'intexp',
                  'train.f1-score': '0-1',
                  'train.falsepos': '1-0',
                  'train.fullscore': '0-1',
                  'train.go': 'id',
                  'train.ha': 'id',
                  'train.index': '0-',
                  'train.loss': '1-0',
                  'train.meanscore': '0-1',
                  'train.n_docs': 'intexp',
                  'train.non_null': '1-0',
                  'train.nz': '0-',
                  'train.precision': '0-1',
                  'train.prediction_time': '0-',
                  'train.recall': '0-1',
                  'train.size': 'intexp',
                  'train.time': '0-',
                  'train.vg': '0-1',
                  'train.weighted_avg': 'id',
                  'train_full.AO': 'intexp',
                  'train_full.F7': 'id',
                  'train_full.FB': '0-1',
                  'train_full.H8': '1-0',
                  'train_full.P0': '1-0',
                  'train_full.XX': '0-',
                  'train_full.accuracy': '0-1',
                  'train_full.auc': '0-1',
                  'train_full.avg_time': '0-',
                  'train_full.benchmark': 'id',
                  'train_full.distinct': 'int',
                  'train_full.entropy': 'id',
                  'train_full.errors': 'int',
                  'train_full.exp_cost': 'intexp',
                  'train_full.f1-score': '0-1',
                  'train_full.falsepos': '1-0',
                  'train_full.fullscore': '0-1',
                  'train_full.go': '1-0',
                  'train_full.ha': 'intexp',
                  'train_full.index': '0-',
                  'train_full.loss': '1-0',
                  'train_full.meanscore': '0-1',
                  'train_full.n_docs': 'intexp',
                  'train_full.non_null': '1-0',
                  'train_full.nz': 'int',
                  'train_full.precision': '0-1',
                  'train_full.prediction_time': '0-',
                  'train_full.recall': '0-1',
                  'train_full.size': 'intexp',
                  'train_full.time': '0-',
                  'train_full.vg': 'id',
                  'train_full.weighted_avg': 'id'}}
COEFS = {'params': [(0.07059994692675806, 0.055697642536076786, 2.310572806411115),
            (-0.05467885990833787, 0.05972841450226196, 2.7849051425443996),
            (0.035308481622389476, 0.03882358375045897, 2.098928924608588),
            (-0.018988867017342398, 0.05934272617592437, 1.6957428138554496),
            (0.07152639742226657, -0.006317303364348881, 1.6936560308164532),
            (-0.012353423777209244, -0.039914502159937415, 2.638854951649827),
            (-0.030475274346162415, 0.048908914763799216, 1.6710409145933354),
            (-0.016032239037614304, 0.059348875943887075, 1.375730259095489),
            (-0.03962081010918864, -0.029513624034320562, 2.546704558155361),
            (-0.09421217412751742, -0.03022746345348258, 2.4501596233281333),
            (0.06989978666579721, -0.020892833824367213, 1.5922433539833332),
            (-0.07059831482771661, 0.05543367155521081, 1.2495222968983917),
            (-0.0306696416511896, -0.08694087839289572, 2.328412712696758),
            (0.0370647740285385, -0.09217654047667215, 1.3180025824448283),
            (0.009535345050751681, -0.03131010956580904, 2.9864447180352864),
            (0.018772903070008146, -0.06969305750645034, 1.5520230382816935),
            (0.058475315983058745, 0.0781068331433975, 1.809102156098648),
            (0.023731508765876222, 0.030384781629045177, 1.1977947751937374),
            (0.09326177510749797, 0.019708035104324548, 1.3918315732348254),
            (-0.02659962435798098, 0.030949788594157285, 1.5159054799688636),
            (-0.08051867282939584, -0.02241353860992701, 2.0048022081541803),
            (0.09650900683910962, 0.046715797340474846, 1.3225972098745724),
            (-0.01336626104922474, 0.04409966781019564, 2.723811038615684),
            (0.08080587257303681, -0.0007413098633171772, 1.492672874028216),
            (0.036889082127512574, -0.06497975726075858, 1.021316556525923),
            (0.058779799700187096, 0.09882880797284851, 1.8830372170607281),
            (0.08167148706705249, -0.04175078613952313, 1.2856106087238597),
            (0.07496847870027609, -0.0946940286088761, 1.0409750073369854),
            (-0.043613824262440405, -0.05328333859319583, 1.1731006920219529),
            (-0.07396029297684642, 0.024042472477749516, 1.5401979306876965),
            (0.03780864088586583, 0.08149254240454046, 1.5660894348996648),
            (0.017456763180479215, -0.08952674032544397, 1.6927914461275841),
            (-0.007099199420508517, -0.05802224419804272, 1.7862813079394817),
            (-0.09916297408383974, -0.03462249937260249, 2.17437024146277),
            (-0.09999822555493308, -0.09124149147275454, 1.015857754854363),
            (0.03174024207872589, -0.045502446110159106, 1.047216190864684),
            (-0.03795289912535496, 0.08906865117034893, 1.5071431208716433),
            (0.014892308890029862, -0.0953920073567721, 2.8828114717291977),
            (0.015668460076283794, 0.07566991230701658, 2.5326249388978406),
            (0.06281547812154534, 0.011819891045502143, 1.1323021055311855),
            (0.08585816400054294, -0.009599955877278757, 1.5211277112225745),
            (0.04136440084682935, 0.023665405776380516, 1.5150949940303113),
            (0.0898395321828418, 0.09773063281049404, 2.8416308594698614),
            (-0.08791228826170733, 0.03708730983246461, 2.765258947847),
            (0.06366346768789302, -0.02998351226170151, 1.1142777427718116),
            (0.045894082972635586, -0.026058007107965284, 1.203912643647363),
            (0.07562369610138428, 0.03136575453596918, 1.0892206165433953),
            (-0.05573699691500822, 0.05155214139691644, 2.034953480305902),
            (0.05898240666928328, 0.010832812656655616, 2.5489939565155417),
            (0.003989175690644317, 0.06237936286931883, 1.534674322151544),
            (-0.05475505460986561, -0.02035201662051353, 1.3289978494944474),
            (-0.006469014477884949, 0.06549425471769674, 2.8483914105994437),
            (0.01552603831152903, -0.09086769916119836, 2.4336255963717495),
            (-0.03441809073635445, -0.05116897606753839, 2.843239859916693),
            (-0.09106663582760577, 0.018196117805970566, 2.506060476219016),
            (0.053203920585795955, 0.005352860765408168, 2.6542912189213412),
            (0.05665893243519901, -0.037338011151315895, 2.653282899652961),
            (0.09107829213692573, 0.08472432428399726, 2.8714349070101606),
            (0.08449248663069317, -0.0924227633337821, 2.89861530877665),
            (0.08786694192903685, -0.029570129204100737, 2.0362647929029696),
            (0.004209947384640575, -0.07506545027284955, 2.5390362944644957),
            (0.020846004826773706, 0.0008489500902701952, 2.7824746266856604),
            (-0.016179590831721755, -0.06415277113671494, 1.6250324781623628),
            (-0.008651292810076039, -0.03061423054034007, 1.6362391826211888),
            (0.08141456313293824, 0.05555952167607309, 1.0767208099603531),
            (0.05370829600126603, 0.09643415345740033, 1.4959321473110712),
            (-0.01786146017942665, 0.07219312618086252, 2.410790030913007),
            (0.013035848437824613, -0.012595465218491558, 2.6032520762492086),
            (-0.08227468454812879, -0.06357292096088714, 1.5520352638334554),
            (-0.014808145853325502, 0.04203420252028128, 2.714074988769501),
            (0.08519543138908323, 0.0152587861334329, 1.4625062554551869),
            (0.08477094425125178, -0.034067882940032296, 2.8540802973462602),
            (0.05645822860415578, 0.0014864516245599174, 1.4041899815905903),
            (0.027631330406291343, -0.017162426256968774, 2.487987721081896),
            (-0.07310047468543215, -0.0439081514785034, 1.4216193909103896),
            (0.09263188692038685, -0.007174125949981569, 2.0118492273171507),
            (0.020858994903209083, -0.07102014637918784, 1.4620054031328669),
            (-0.08918534785835384, -0.061725741658009016, 1.926248416696696),
            (-0.008777851906529396, 0.0836081488658996, 1.2123095818074334),
            (0.05298522507156603, 0.08685424042017933, 1.841443125411789),
            (0.07636094515395478, -0.08008617944028085, 2.8893937156622145),
            (-0.03629449188579485, -0.07721068057016525, 2.6059529957372303),
            (-0.05504000924229753, 0.04734137735746041, 2.62900535479083),
            (-0.064213606628612, -0.06056365502788905, 2.6488728922785096),
            (0.04695553232556676, -0.04789055645834888, 1.5005817675300253),
            (-0.04341200263243117, -0.03634832738135017, 1.0951083973548503),
            (0.05234251414234381, -0.06009785868513576, 1.5926782940343722),
            (0.04911534739108586, -0.09184659231877013, 2.934367535933335),
            (-0.05257232291012551, 0.027753941614702543, 2.3305368548417595),
            (0.07497006005570114, -0.035105443606540984, 1.6986168712399656),
            (-0.07562810587587994, -0.04377410302426035, 1.410530070320162),
            (-0.006527368792311167, -0.05350257115302013, 1.428866018765034),
            (-0.04980284236704671, 0.032179354146809475, 1.2891285585102348),
            (-0.08690876061742991, -0.06651234323124741, 1.8050993063482041),
            (-0.08825228238042492, -0.040157516189120494, 1.5023517418583432),
            (0.029087113271626053, -0.08795662374312435, 1.0514926994510925),
            (-0.011931859892748878, 0.020730068004743085, 2.11289009386937),
            (0.04901671502095839, -0.0823794941946749, 2.6598778319806198),
            (-0.0364286104899485, 0.03315561787417204, 1.3582931019091047),
            (-0.017969556398542627, -0.09216784334747657, 1.3303635862208048),
            (-0.005313649245061905, -0.06761070798449309, 1.853498417635561),
            (-0.09995187462305505, 0.0023083994548662723, 2.96410494621807),
            (0.05778694062255488, -0.027002739271417456, 1.29946590833063),
            (0.055238017398245215, -6.802223376538297e-05, 1.5439504362621392),
            (0.038709282489961694, -0.07799566292484264, 2.865956115347915),
            (-0.07034782735692896, 0.017504697475493727, 2.4174917598728634),
            (-0.05350427694180937, 0.07935966388017893, 2.4555824077901622),
            (-0.01902463012153492, 0.09052589840790692, 1.7859525956486193),
            (-0.04518101346838015, -0.04500214213131968, 1.485783943960037),
            (0.0914013735053752, 0.03814113135254435, 2.1606845935271455),
            (0.049753881831334806, -0.0018713083878593856, 2.467792813796092),
            (-0.04974387851122426, 0.09044519436081375, 2.7378120280131943),
            (-0.09718203300458526, 0.05885307494507108, 2.811262822049766),
            (-0.04977606061146396, 0.08060788832380816, 1.8636847275131352),
            (0.06116096081689945, 0.08743908749227444, 2.7481951877182933),
            (0.0739690913650771, -0.06580716568344208, 2.5769692855347404),
            (0.05917973514138236, -0.007143354776876151, 2.629318657998052),
            (0.05728712019419793, -0.01891314691609222, 1.8870356134714037),
            (0.08631865118423798, 0.09584783570855973, 2.545381831959391),
            (0.02820890079677396, 0.06640438074225116, 2.7523580343321146),
            (0.07551455540000884, 0.09340043584766047, 2.0222833006306153),
            (0.00884352040240581, 0.06579879567452546, 1.6616543352810835),
            (-0.07033690759628147, 0.038219222249168794, 2.2970099233547865),
            (-0.012800392580495326, -0.010905659829522144, 2.8026110392230184),
            (-0.05909800910935146, 0.03382672583530075, 2.60762961782982),
            (0.08754127602787354, 0.09354517854214076, 2.8553895874968713),
            (-0.0941903593622832, 0.0918416602093636, 2.5383635024395206),
            (-0.06938899586576495, -0.05052570602560294, 1.8278021569525142),
            (-0.06414655873527926, -0.010257670872246188, 2.5295293926321047),
            (0.0019075749144893822, 0.09811205645201534, 1.8910102045566934),
            (-0.004709170573822613, 0.07742584178999198, 1.4897739577045899),
            (-0.011740810945174845, -0.03124750717460814, 2.4493969561678277),
            (0.0037065817809763396, 0.0914544738174716, 1.1085802946241061),
            (0.08124002965637309, -0.04567073197454777, 1.253731309243114),
            (-0.03313075367882322, 0.07143031945558698, 2.6884902901354004),
            (-0.07598696038363394, 0.05975858733327624, 1.910473260625604),
            (-0.0998203968198389, -0.05681204143709162, 2.2081579966351614),
            (0.051417076443616205, -0.0066878256778742234, 1.2736828902826192),
            (-0.09806511075863655, -0.09025572797112634, 2.0233856602655376),
            (0.05137345424857226, 0.05741924383101135, 2.5131615100569817),
            (-0.08860772924110444, 0.08148906982280166, 1.3503674333318834),
            (0.025424568461203667, -0.05062916253294872, 1.5972384127211037),
            (0.005334945749967401, 0.07224086206535904, 1.710071454860606),
            (-0.0562025511194852, 0.07636741226961538, 1.4302703715693876),
            (0.09771509093543096, 0.09246052704517271, 1.7011702430952538),
            (-0.033397424011598606, 0.011397085978865323, 2.034893951538931),
            (-0.00832782384023871, 0.007173182391812666, 2.8137906023845276),
            (0.09458904856838679, -0.044266555237755446, 2.9896894748806044),
            (-0.08616073682211789, 0.08230325115557402, 2.6964111761890956),
            (-0.07072791825874945, -0.05790839871928617, 2.567495619176092),
            (-0.0847955659674443, -0.0167798341043726, 1.0623547041893178),
            (-0.05209667897153308, 0.06684706641187033, 1.282380124317414),
            (0.04900963840324657, -0.02917286554366852, 2.498161215086142),
            (0.014709942874125886, -0.05383001972520949, 2.518883108820001),
            (-0.07238138040566239, -0.0758509413766979, 2.7112766048976145),
            (0.052784089820080954, 0.05508554087564807, 2.3543346013059256),
            (-0.04136901479824402, 0.0622809064191549, 2.4301037632358176),
            (-0.09228944629021417, -0.07220109168268132, 1.4175909735076428),
            (0.01008532309099927, -0.01754464417072721, 2.548195040199418),
            (0.005173767452707229, -0.011702759291167625, 1.0234955758763988),
            (-0.08406642270802307, -0.03212003306494009, 2.100442624119432),
            (0.06121979760433907, -0.09192651310153557, 2.3061132413045557),
            (-0.05765114973842489, -0.06737467794793062, 1.2396473022765295),
            (0.047327969733793995, 0.026309479113699463, 2.8823764056318653),
            (-0.018483614357845332, 0.06531336927731077, 1.1686770048841788),
            (-0.03616987180555363, -0.022162930880841133, 2.6234913757987752),
            (0.06782754333264793, -0.01300685869768961, 2.0172787994046857),
            (0.042486690462020305, 0.07975415095504179, 2.291203401356593),
            (0.01545308501392155, -0.008281640914792152, 1.5322056858229258),
            (-0.09037957121080334, 0.08946911065110894, 2.572193200854165),
            (-0.025653366599310085, -0.008566131823093182, 1.2528644444274815),
            (-0.06630699733145323, 0.057486550609878145, 1.8222707097419062),
            (-0.08425486761027415, 0.023400956537059953, 2.348224779514572),
            (-0.09187625945848964, 0.0029561278475881136, 1.737909445681013),
            (0.03453748457940248, -0.01584447539385478, 2.8666486765255437),
            (-0.05993613263796371, 0.09682838211249403, 1.3997716288048216),
            (-0.04309053562768366, -0.08041509732672217, 1.6965297891859743),
            (-0.008974706705785637, 0.05721999683308729, 2.6601242689586346),
            (0.08182863033320023, 0.08072795561727211, 2.9959597272755314),
            (0.07297970654041858, -0.08656467279625753, 1.438973825476297),
            (0.06239655737418545, 0.05087758039080867, 1.109855716547373),
            (0.08053231136204175, 0.04193670904501473, 1.1760536089877802),
            (0.07875381953720659, -0.042825770888294645, 1.1002971701203426),
            (0.05238896596289441, 0.015887715863853097, 2.4776433345768587),
            (-0.011409906687687238, -0.009810571474853508, 1.8867915489434135),
            (0.0850062894714273, -0.08754144372502906, 2.9103102082403014),
            (-0.09349014886615913, 0.039918430316624426, 2.024094527812472),
            (-0.07265986818747545, -0.07128771629737339, 1.9184715666542294),
            (-0.03908687934721833, 0.0904801926007999, 1.3016247681819528),
            (-0.09429704225098241, -0.06013583481327807, 2.2821829526677586),
            (-0.09954523752044611, 0.06606822505017179, 1.9468878002042025),
            (-0.07882558643794409, 0.09456576778606943, 2.0106880608896818),
            (0.018072179581903283, -0.01605426670652535, 1.9491908335835992),
            (0.010719560869152558, 0.03655539627601831, 2.684734335361858),
            (0.08766003212016404, 0.030887633517879903, 2.4141400060774076),
            (0.03417895426218237, 0.07018540117288982, 1.2872830755678588),
            (0.029734815254096436, 0.006748484764333207, 2.277484603746775),
            (0.0360036982228564, -0.04824904590382304, 1.6105917610769631),
            (-0.04960218003258639, -0.06676082540585929, 2.975406308785578),
            (0.0968313835995698, 0.08904469645973492, 2.805241165719217),
            (-0.05710161542456147, -0.05499721442251931, 2.1099476337894436),
            (0.08624908348990076, -0.005121440152863671, 2.3455366670855433),
            (0.05567404175187757, -0.04058671526699889, 2.483480744818726),
            (-0.03899967178011887, -0.016091632674802986, 1.2833052676594208),
            (0.04786258765567494, -0.006966290698240285, 2.661317679744227),
            (-0.049897877304514206, -0.005983397779391136, 1.5849171856357704),
            (-0.08938162240690306, 0.03397844197696537, 2.1258300520174087),
            (0.0917618555137523, -0.010352552917288496, 2.9487092820201397),
            (-0.027964930175702882, 0.06508150513542532, 1.5177969904441313),
            (-0.061897286444341115, 0.03759785774797242, 2.5198046100035407),
            (0.08306632055618446, 0.060001713791075745, 2.0192899360279797),
            (-0.05374054111137534, 0.02963412635714649, 1.5832955280567658),
            (-0.04613370925516298, -0.08584462529785247, 1.5578687944222684),
            (-0.06696659658193771, 0.048406342002106445, 2.655253694056243),
            (0.0023123913381401795, 0.07615803312357036, 2.8535961693315848),
            (-0.09901779640021346, -0.07197609367339004, 2.1932035675129615),
            (0.019539401833188585, 0.010740328880134292, 1.2856377905008736),
            (-0.01860320916240106, 0.06480440407884813, 1.7367463355534671),
            (0.056864340419135684, 0.07799629132329955, 2.8628962136227125),
            (0.031923296903910325, -0.0752719957950989, 2.764849596174283),
            (-0.06774274817374626, -0.026725220506589084, 1.7423346655210674),
            (-0.09687310278602655, -0.05721484710717817, 2.798804460545078),
            (-0.07968247246129637, -0.08927731264435255, 1.5372507093769048),
            (-0.00945179253444639, -0.0008424962080067766, 1.0427939398872055),
            (0.051942896003050604, -0.014958035945988352, 1.5270050246915479),
            (0.047990873238453774, 0.0641203591869631, 2.1866918661327714),
            (-0.002041090399477391, 0.005212392763116802, 2.179134732611904),
            (0.0030670968690781064, 0.061492813215852926, 2.389978770641048),
            (0.03998764973376584, 0.06640540459928887, 2.3619211777632887),
            (-0.054473749390634985, -0.09225655593271885, 1.584611929248664),
            (0.0834911776792169, -0.03506907510592945, 2.141871013148091),
            (0.09855477512244298, 0.08912853246414179, 2.5878896277099876),
            (-0.07198842248190121, -0.07689303554863272, 2.3553192318717544),
            (-0.04657062266385619, -0.09470275812770029, 2.3309253588111125),
            (-0.05230031235760331, 0.09139473161571476, 1.7624545770144013),
            (-0.05867149695679413, -0.06131589131325968, 1.193189803066237),
            (-0.041279631541877554, 0.04329459173245126, 1.9086990792402965),
            (-0.025207959764490043, 0.06632756142464807, 2.7934340482405),
            (0.020193515101463694, -0.06775595088041561, 1.5140381221054733),
            (-0.0766759938074278, -0.08884327259300671, 1.0615134376103004),
            (0.03191812523218157, -0.00013941088063132434, 2.4875777108391826),
            (-0.02824224131968389, -0.008988858599862676, 2.917910785023301),
            (-0.024090564821005647, 0.078904118881759, 1.9731018507980254),
            (0.03862650866189246, -0.07726285655553494, 2.2382362578993193),
            (0.09796810933562625, 0.07396510953113353, 2.4909181076785254),
            (0.06670490133913146, 0.08643342944057697, 1.937024205254047),
            (0.09711332054834318, -0.07258340314011935, 1.3566319884049456),
            (-0.06012024850111038, -0.019577128880070488, 1.4149501864293044),
            (0.08823356465206825, -0.047935346222223396, 1.7000866403160857),
            (-0.04940600767686956, -0.021161954311724546, 1.853735159849366),
            (-0.07557588903621755, 0.04191270821281429, 2.9550527221667515),
            (0.027495846877649305, -0.028319745128361315, 1.0345176509680236),
            (-0.06130034911260725, -0.09293812431374937, 2.518467429271706),
            (-0.08830720285888057, -0.07703646974537182, 1.6982781382422636),
            (-0.030022695310343475, -0.07418584168850975, 2.7391398447217865),
            (-0.07514861480951052, -0.06033148257203134, 2.4339378322715084)],
 'work': [(0.1259523404707969, -0.07871004861944003, 1.615484204769882),
          (0.10168278967647354, 0.09268896687420247, 2.352721803031373),
          (0.08161172848049211, 0.09973381655212343, 1.8156035754172066),
          (0.05373325388039013, 0.09230546103884152, 2.1762156654904405),
          (0.10963543824263298, -0.048579737746663826, 2.618184557995513),
          (0.07969592032338993, -0.039818001559638196, 2.693940975741119),
          (0.08945150606608637, -0.05987515544921449, 1.1630856180049531),
          (0.13065505269650984, 0.07996642708139462, 1.9382757793833938),
          (0.11573257773563987, 0.01953176595969744, 1.7382985041605856),
          (0.14011925545858475, 0.06218277641620168, 2.262846103543205),
          (0.0633170602090232, 0.046623249100957304, 1.2024439997039675),
          (0.11065649444478345, -0.06305616595259303, 1.553920780861012),
          (0.06039846457685252, 0.07803169292539555, 1.7118459070963599),
          (0.11096067057727037, 0.09057859500542498, 1.0633026357867033),
          (0.14707577383265452, -0.0043062368422073505, 1.9226906643470023),
          (0.06845265870595064, 0.09193806966914048, 1.7327200150178066),
          (0.09642954648152025, -0.0777587474372059, 2.1911080275517927),
          (0.07357431948702949, -0.04726501292435728, 1.7847837689215593),
          (0.0874183809451198, -0.033725416237178465, 1.2874872547443115),
          (0.14029445624521608, 0.0677419989231095, 2.820093587681344),
          (0.11986270714334224, 0.028040513119669236, 1.52868031457596),
          (0.10862023625525338, 0.023790378891353756, 1.3672423232219453),
          (0.13473639677099414, 0.07875409789254748, 2.7425039951331884),
          (0.12665722209296149, -0.0804683613228544, 2.3924368944397862),
          (0.09045639780078539, -0.08144948658784897, 1.0746601184060325),
          (0.13815979626937377, 0.09089501520950091, 2.2207270064001765),
          (0.13335771755919645, 0.020387539886480677, 1.16060204945391),
          (0.08729843484209618, -0.028187704962512994, 1.1377628247972316),
          (0.10383015807478833, 0.09097560289875636, 2.542134812531108),
          (0.12651310771253, -0.0962253708320703, 1.6327201818652393),
          (0.10380359868421807, -0.054249369194507825, 2.418233833840948),
          (0.1481151624890119, 0.04696684946475571, 1.4548199697374926),
          (0.06037580138438553, 0.049651182027443896, 1.9994412207149181),
          (0.11796111741860864, -0.08845486905537225, 2.182799291948819),
          (0.05811336062577275, -0.0029814826779026166, 2.5581186449028284),
          (0.1365574011810195, 0.02650363136120204, 2.5580331035647665),
          (0.1056528851792755, -0.010049991381464743, 1.6787331379456578),
          (0.14708722432260246, 0.06747551518486736, 2.265165362270733),
          (0.05010411542424057, -0.03078385787753679, 2.2987586758710883),
          (0.10100113996622216, 0.09876728760380749, 2.691205795819219),
          (0.0735826742737395, 0.03849555840980273, 2.080579043678875),
          (0.11285723500260607, 0.007440065021284734, 2.415826960990598),
          (0.14924390167853208, -0.013738430607044078, 1.3656082388691606),
          (0.08867409685039637, -0.05061869782891446, 1.5223617021927134),
          (0.07812646882520183, 0.05060381870685479, 2.5192873039292794),
          (0.0559906750247871, 0.08516860024044709, 2.9542630026924352),
          (0.13493911453484866, -0.08218501728871644, 2.7916115180858103),
          (0.07429281715916328, -0.07814723193515294, 2.935270131724775),
          (0.12674148212554848, 0.03579932562322549, 2.579858470179211),
          (0.09829624568541043, 0.011098519262766685, 1.9518314872443492),
          (0.1324798175380097, -0.07799224302125495, 1.4066690725455766),
          (0.10838506646234239, -0.03586937768212975, 2.4401426233518997),
          (0.10451287474426799, -0.0030877997533955426, 1.7449957168333692),
          (0.09705430227553616, -0.09955275818866534, 1.6925595927079713),
          (0.12902454660359375, 0.00836597127978607, 2.1971335891579917),
          (0.08833005613555474, 0.00013077642234785025, 2.08388013061706),
          (0.12230570527585645, -0.030383437792457488, 1.8785944709237767),
          (0.09556413562261823, -0.04541086751458108, 2.0213977653628223),
          (0.13022407812743178, -0.04473146197694067, 1.4235933895465045),
          (0.05299866974822425, -0.09722295879717345, 2.778622740098276),
          (0.09763330651492008, -0.02757184609660719, 1.0156191013399856),
          (0.06325080145855493, -0.08263276070990616, 2.2334495864873025),
          (0.14881537515535803, -0.07447899957978198, 1.6103783701646326),
          (0.06352054138148665, -0.05751183611124364, 2.9467770915347717),
          (0.1385574704817547, 0.0060545714610655554, 1.4794887392951348),
          (0.05979387530444918, -0.09368362900657462, 2.419527466442926),
          (0.08990411388882133, 0.013053479017267014, 1.3011557425970512),
          (0.05627438951784818, -0.006862455432247061, 2.365474335343231),
          (0.12698614604614034, 0.03317401462521369, 2.864208828809151),
          (0.05766307790109426, -0.07446519944484771, 1.1456193629065983),
          (0.061048684322021665, 0.023106178521085513, 2.772904176822225),
          (0.10824972709086239, 0.07326194560589924, 2.352663659187378),
          (0.10268962896915496, -0.0106823200568682, 1.0131165016092005),
          (0.13983636165161678, 0.07702258458814332, 1.5734445027764037),
          (0.11573796796795884, 0.00637789787059144, 1.1390527757274147),
          (0.1188880684132908, 0.09877370057793289, 1.2981334832242895),
          (0.0874882741796526, -0.010090508161524375, 2.814597271870797),
          (0.09389095077941767, 0.06319251367680911, 1.8570314469483395),
          (0.07722107423878387, 0.0671739500442769, 2.5566750692171736),
          (0.1300416188535609, -0.03372233671044625, 1.1787967775546162),
          (0.08937467323315312, 0.021194701570787358, 1.2231161205027863),
          (0.11575174169452992, 0.0401030956426926, 1.130357113223633),
          (0.11882070467849938, 0.01972474691056006, 1.1000450009598526),
          (0.08158933334729948, 0.026337973921931768, 2.1864207657016417),
          (0.10404604689474586, -0.05504926661574079, 2.5839437299978956),
          (0.0983207789281517, 0.022600494765909487, 1.8925205957434221),
          (0.08501929116073795, -0.07158691729998348, 2.7141075200454576),
          (0.14599266164028335, -0.03768923669422528, 2.0758044018815625),
          (0.0884214591664033, -0.06818332571610111, 1.7482108260452425),
          (0.06204490763885767, 0.0571583625530761, 2.2651611802360456),
          (0.0957534421409783, -0.08301198332724864, 1.2648234098756157),
          (0.12206468798485738, -0.04137180345479104, 2.098761716963558),
          (0.07261585195077726, -0.022973195832953097, 1.4078718867814286),
          (0.08643124567320817, -0.004150902958394598, 1.9614111820036388),
          (0.12519312843619634, 0.027555007780300983, 1.7338115065483273),
          (0.13911395136818167, -0.08795024606857123, 1.8086028028210397),
          (0.1486337004311557, -0.03188716354847494, 2.3825927592024243),
          (0.11825142735747894, -0.017475784472993888, 1.6920892647208543),
          (0.1286114298859715, 0.029035253884914847, 2.152358471245835),
          (0.05633142501993224, -0.033679252573282234, 2.054603764318213),
          (0.07012820164740165, 0.05007360926803667, 2.9802109305301663),
          (0.05654410709544849, 0.013866110470280787, 1.0644528152514046),
          (0.11103694726747979, 0.05492441703516632, 2.270080551143312),
          (0.1071209252847679, 0.007566286283345922, 2.359046779451173),
          (0.12223559028427995, -0.033337750875800445, 2.7075177121458824),
          (0.11135983251594989, 0.07740066363652029, 1.5419035853729617),
          (0.07576158414246371, 0.0019666916526468736, 1.8402612683973167),
          (0.07731881531327293, -0.028271718811449895, 2.551500471564479),
          (0.054802441580920735, -0.027464118930176265, 2.7039512733518274),
          (0.12868902277518302, -0.09749335982832286, 1.1320680281586952),
          (0.05598316965750924, -0.021307087755399773, 2.0598854921944962),
          (0.10893516343430709, -0.0417178927449809, 1.4771979233120516),
          (0.05714444099198435, 0.031182455860191333, 2.5103433241048103),
          (0.07853460964347606, 0.0277446030913841, 1.6509507891300341),
          (0.11065633746835882, -0.039703626414961196, 2.4007224172794888),
          (0.14066895651220496, 0.06784380153276237, 2.677341457927435),
          (0.13607330873499157, -0.09791018079516162, 1.9381273420266087),
          (0.0955309274269644, -0.025956409273091396, 2.339671140752337),
          (0.14373582578039412, -0.012124396960897427, 1.9493385626968152),
          (0.05107418636487557, 0.0481211605629592, 2.9658497053401915),
          (0.13492137980095262, -0.06076894126921602, 1.9357933119420563),
          (0.12318466213139175, -0.025287276634471487, 2.25591331938823),
          (0.07974892494702222, 0.07040528721648373, 1.5814352084237708),
          (0.09537374214518402, 0.018568314979262188, 1.996410564605905),
          (0.10903349671709417, -0.07315950648587016, 1.7462328356185335),
          (0.09242184250474561, -0.09704441321944378, 1.4120884917273773),
          (0.13400840645900755, -0.038639077618111854, 2.338484370843627),
          (0.13562247684109924, 0.02207089718792521, 1.2402773592617065),
          (0.1253863944942077, -0.03267911036854439, 2.336294796444676),
          (0.09336506759510654, 0.07827457397184226, 2.8116425086699235),
          (0.08000375262699325, -0.0049647482918883795, 1.492632394558769),
          (0.10636757538329587, -0.0066676922180799875, 1.007992161504487),
          (0.13040688752408758, 0.042946003696088, 1.2625057751196807),
          (0.12235836719147931, -0.03932507604537525, 1.6765596349897898),
          (0.08482939508240028, -0.05991004451524051, 1.0596175495884748),
          (0.10245910957093093, 0.0363575862678015, 2.8618037826673146),
          (0.0631639459249026, 0.02630807031435234, 2.2788640148144004),
          (0.07792198065733932, 0.03297643924248708, 2.819844246197109),
          (0.12048700320767168, 0.01860791154945747, 1.1856050126268538),
          (0.11283598474635063, 0.04985645169927666, 1.0743242666260175),
          (0.11894848719660449, 0.03450891315808549, 1.6140351524009409),
          (0.1179762627133959, -0.09947627377406726, 2.860119098035293),
          (0.061152518113584624, -0.04788593714119507, 2.342295815625313),
          (0.1057039453857094, -0.07023253348323993, 2.1747462540279265),
          (0.05332580735908746, -0.05544121896324819, 2.2162054412364505),
          (0.11536799969492957, 0.04046266078909652, 1.5235628309230014),
          (0.123844765013688, -0.0639533281119455, 2.865859044378742),
          (0.144286641630323, 0.014095991195942001, 2.176735155337973),
          (0.08852355420179552, 0.07191864049559296, 1.0810510447529453),
          (0.12276600030694092, 0.02956589385713862, 1.36845257925805),
          (0.09174537113435807, 0.06337234292874921, 1.1989964981533558),
          (0.12958629612300837, 0.09962875406166591, 1.8471048870643965),
          (0.08169353382383573, -0.07190401153427856, 2.267894826622089),
          (0.09392571816882289, 0.05279532511875265, 1.3841249587579887),
          (0.11193105271048098, 0.03596355520998462, 2.364452851390263),
          (0.09406104319385064, 0.06354819623998817, 1.5849734926888994),
          (0.14285091798157828, -0.05331722705691562, 1.6100886043424396),
          (0.14848017399606622, -0.007780742805428703, 1.8770293172251027),
          (0.09433148863500238, -0.0722807496806158, 2.232144758848679),
          (0.1480355539986874, -0.02578856340262546, 2.107171344973888),
          (0.059967917794125074, -0.07787897676253726, 2.238667348839166),
          (0.11005014511547673, 0.02831360060018437, 1.5127302954109365),
          (0.06763980318425168, -8.838993212086088e-05, 2.471575860453867),
          (0.10772878199502639, -0.09889367659737469, 1.1096661130673144),
          (0.07100965647667609, 0.08471121982996152, 2.0234205298308554),
          (0.11513834710832783, 0.0016136833354395141, 2.9770937996089195),
          (0.1306991904253231, 0.03331602882471149, 1.5855121493384419),
          (0.09890733459075843, -0.02431961557361806, 2.892442358315781),
          (0.0900877931094739, 0.027542861768377336, 1.9508090227757646),
          (0.14646902862851244, 0.06490268905359439, 2.23146994978027),
          (0.06739422903894451, 0.038909894993094135, 2.5319770100171284),
          (0.07452102066128649, 0.01994109019646935, 2.5461525979509725),
          (0.12258793080795119, -0.07191083534545649, 1.537119365610346),
          (0.09905390868391517, 0.036426914144231076, 2.619795914477515),
          (0.0817586736884924, -0.08022390096706873, 2.177966564553339),
          (0.05159572103589857, 0.003568410107724976, 2.4368637682872727),
          (0.14473553193291072, 0.04045556198512984, 2.423696497510915),
          (0.07772290103879761, -0.03701142200125827, 1.9330372307360366),
          (0.09333899217082489, -0.08062143716720511, 2.6393227324668196),
          (0.12960432204939842, -0.07690900955900465, 2.147553937855782),
          (0.0814228836254014, -0.03709692816159087, 2.4649523761801118),
          (0.08027688546518982, -0.08606504665806303, 1.3619955396529404),
          (0.14969942511471745, 0.06075037390322485, 1.9974195595840916),
          (0.1320495578193349, 0.03266425762403799, 2.1810713705875364),
          (0.12314004766774742, -0.040284201937995534, 2.4977373398882277),
          (0.12452962433942241, 0.047956964685397424, 2.355568875937076),
          (0.10589931720435661, 0.09893192224964664, 2.2686398765831797),
          (0.14514632059316845, 0.08367975110712389, 1.110196100140009),
          (0.053426746840606235, -0.04800947374322471, 1.8616522219788343),
          (0.10447321169766582, -0.07608631835854887, 1.910830647199053),
          (0.12864143300917968, 0.003361812110196302, 1.5384698513817716),
          (0.09607436629963803, -0.028184181482324377, 2.5622139560842907),
          (0.11665102172093643, 0.08186591129340065, 1.0797439821120065),
          (0.1319958095351963, 0.017171831091189624, 2.2586189449329277),
          (0.0962403141653117, -0.03651876295072701, 1.7812845276169094),
          (0.1272952310138477, 0.043409907417741866, 2.358925249669939),
          (0.10920860516679215, -0.03054924231432095, 1.5846190347810778),
          (0.052154388071174465, -0.0820787581061635, 2.566352395918652),
          (0.1272275444444027, 0.05160991858489605, 1.2455910327283104),
          (0.09456095880314311, 0.07562332879005843, 2.5753020108373588),
          (0.09912367185227294, 0.07851007693057308, 1.5644198921506134),
          (0.06937112984147333, 0.06198165037321987, 1.1819243217603725),
          (0.10171993205173295, 0.018640605967747012, 1.2860195286178966),
          (0.08831788166705876, -0.06088030529538431, 2.0489619445024454),
          (0.10201735766633158, 0.002409250757571965, 2.0522954756799043),
          (0.0860452090747418, 0.05108986646408126, 1.082291642741201),
          (0.1327784090338187, -0.04398855367452084, 1.6892361615429736),
          (0.1227339677552296, 0.05132536719715555, 1.4901379362349878),
          (0.06561992158943374, -0.036154004540483634, 2.7579335453384477),
          (0.06347690337014257, -0.03760254014252258, 2.345922858600158),
          (0.12415687412436392, -0.06413739817645109, 2.989170100243034),
          (0.12065855163481666, -0.047378609739381954, 1.0603692276367362),
          (0.11687506666997012, 0.05135246917301736, 2.8120777246404707),
          (0.0545253984847905, -0.04271597037095434, 2.184629380301958),
          (0.06309089894326228, -0.023131461573973278, 1.2367432249999228),
          (0.13347493320935133, -0.09033534436298479, 2.62651569553291),
          (0.11262238810040848, -0.032099563621141, 1.3946362495109437),
          (0.11752316284793647, -0.036946329823245444, 1.2255745796850652),
          (0.06165697143513202, 0.03749740701388088, 1.1458269200429887),
          (0.1389796882808717, -0.06841191464135263, 1.0714022176796218),
          (0.11485043028359171, -0.0858664231962377, 2.0399479794184803),
          (0.14026556850297148, 0.05903372529864104, 1.6972419748429532),
          (0.08124103758524776, -0.04797606102201151, 1.4547202231325558),
          (0.10663629278066909, -0.09081459334444847, 2.676855402515348),
          (0.08096388240218205, -0.005208052136686153, 1.4271923990738578),
          (0.08453489840834247, 0.0898616992251898, 1.2379160939631688),
          (0.10617089037070918, -0.07445303004197668, 2.8500110909731338),
          (0.0764442455258426, -0.0031401855793100897, 1.5331232634294867),
          (0.10738500853162009, 0.019329222993621123, 1.1747185870057784),
          (0.050235207115763986, 0.05873668091100279, 1.5135932228348508),
          (0.08370391713787814, -0.057435323930653516, 2.5798764874942504),
          (0.13754259704596594, 0.09442522264960773, 2.2143476676352476),
          (0.06537496693038822, 0.05468846233176769, 1.5173366316525787),
          (0.1276814738625831, 0.050341781644625855, 2.4739225636713487),
          (0.14496848579738203, -0.062378699450028365, 1.1951760079553257),
          (0.10045461512975228, -0.06933525767077237, 1.2090322065542543),
          (0.08457177620230127, -0.05544465841025244, 1.460758321774451),
          (0.14234275462670698, 0.04527345241670774, 1.1243840391596842),
          (0.14673156823861033, -0.018954155246649534, 2.220996407644111),
          (0.14351995531767395, 0.07363164432267394, 2.3542223027664475),
          (0.08084508017655392, -0.09537692801883602, 2.807401259742912),
          (0.05246881139040215, -0.0009997276777581748, 1.9744174342043845),
          (0.11673726704974853, -0.07467087068519734, 1.0701189157152073),
          (0.0739221107894636, -0.03304800020520149, 1.8382595527415766),
          (0.1128789633266117, -0.06988853630032066, 1.8542364015381925),
          (0.07063697210062672, 0.07173434767025788, 1.8063640620155812),
          (0.10777287770018495, 0.017515195223920907, 1.6164177651180698),
          (0.07663404354506129, -0.07213909618877153, 2.3567483353130614),
          (0.08248329398251611, 0.046841245952134763, 2.0988707306906975),
          (0.10693053524035778, -0.041173060506060004, 1.4311556030409947),
          (0.13827186690005633, 0.023353808231883044, 1.7333625573056293),
          (0.12003112237250896, 0.005207326577367222, 1.9113656891273691),
          (0.12164497631179087, 0.02220518538904867, 2.6814580637627086),
          (0.13811252805337093, 0.0011596185230133838, 2.9134119081583583),
          (0.05140458458410194, -0.09082544610772417, 1.6377694052776248),
          (0.09137132802316683, -0.0187955750157887, 1.9611055090546983)]}

main()

# Comment to update:4417541792309